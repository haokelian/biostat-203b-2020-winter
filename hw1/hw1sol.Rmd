---
title: "Homework 1 Solution"
author: "Haoke Lian (605266888)"
date: "2020/1/19"
output: html_document
---

## Q2

**Here is a screenshot of my completion report:**
<p align="center">
  <img src="./Completion Report.png">
</p>


3. The output is listed below the script
```{bash, include=TRUE}
for datafile in /home/203bdata/mimic-iii/*.csv
  do
    ls $datafile
  done
```

Numbers of lines and file names are listed in the same order:
```{bash}
 for datafile in /home/203bdata/mimic-iii/*.csv
  do
    wc -l $datafile
  done
```

4. The first 10 lines of ADMISSIONS.csv are:
```{bash}
  head /home/203bdata/mimic-iii/ADMISSIONS.csv
```

The last 10 lines of ADMISSIONS.csv are:
```{bash}
  tail /home/203bdata/mimic-iii/ADMISSIONS.csv
```


Calculate the number of rows:
```{bash}
   awk 'END { print NR }' /home/203bdata/mimic-iii/ADMISSIONS.csv
```

The number of patients by calcualting number of different subject ID
```{bash}
    awk -F, '{ print $2 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | uniq | awk 'END {print NR}'
```

The possible values of each variable are listed below:
  INSURANCE: 
```{bash}
     awk -F, '{ print $10 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | uniq
```

  LANGUAGE: 
```{bash}
     awk -F, '{ print $11 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | uniq
```
  RELIGION: 
```{bash}
     awk -F, '{ print $12 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | uniq
```
  
  MARITAL_STATUS:
```{bash}
     awk -F, '{ print $13 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | uniq
```
 
  ETHNICITY:
```{bash}
     awk -F, '{ print $14 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | uniq
```
  
  The number of Hispanic patients are calculated the number of `HISPANIC` in the colume of `ETHNICITY`
```{bash}
    awk -F, '{ print $14 }' /home/203bdata/mimic-iii/ADMISSIONS.csv | tail -n +2 | sort | grep -o HISPANIC | wc -l
```




## Q3

1. First, get the txt:
```{bash,eval=FALSE}
    curl http://www.gutenberg.org/cache/epub/42671/pg42671.txt > pride_and_prejudice.txt
```

The tabulate of times of main characters mentioned is listed as below:
```{bash}
    printf 'Name       ''Times Metioned\n'
    for name in 'Elizabeth' 'Darcy' 'Jane' 'Lydia'
      do count=$(grep -o $name pride_and_prejudice.txt | wc -l)
      printf '%-15s%-10s\n' $name $count
      done
```

2. The output of two commands are text files with the same content:
```{bash, eval=FALSE}
    echo 'hello, world' > test1.txt
```
The first command means that everything that's in "test1.txt" will be deleted, and "hello world" will be written to it (which means that "hello world" will be right at the beginning of "test1.txt".

```{bash, eval=FALSE}
    echo 'hello, world' >> test2.txt
```
The second command means that "hello, world" will be appended to "test2.txt", so nothing will be deleted from "test2.txt", and "hello, world will be at the end of "test2.txt".

3. 
Start the editor `vi` and save the file as `middle.sh`. Then use `chmod 755 middle.sh`.

Excute the file to output middle lines.
```{bash}
    cd ~
    ./middle.sh pride_and_prejudice.txt 20 5
```

Command line arguments are accessed using numeric indexes inside a shell script preceded with a dollar($) sign. That is, first argument can be referred as $1, second as $2 and third as $3.

In this case, meanings that the variables stand for are listed as below:
`$1` stands for row number of end of lines presented. 
`$2` stands for name of the file in which presented lines are`./pride_and_prejudice.txt`
`$3` stands for number of middle lines presented. 

The first line `#!/bin/sh` selects the `sh` shell. Problems arise when not using `#!/bin/sh` because the script-maker assumes the link is to bash as the default, but they function differently.

Then delete the file.
```{bash}
    rm pride_and_prejudice.txt
```


## Q4

1. This is my `runSim.R`code:
```{bash}
    cat runSim.R
```

Quote the runSim.R in bash shell. Output MSEs of primed-indexed average estimator and the classical sample average.
```{bash}
    Rscript runSim.R n=100 dist=\"gaussian\" seed=203 rep=50
```

2. This is my `autoSim.R`code:
```{bash}
    cat autoSim.R
```

3. Call autoSim.R and generate simulation data.
```{bash}
    Rscript autoSim.R
````
Table.R is shown as below.
```{bash}
    cat Table.R
````

Then report the average MSEs with a table:
```{bash}
    Rscript Table.R
````